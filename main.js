!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t,n,r,o){var i=o.handleCardClick,u=o.handleButtonTrash,a=o.handlePopupDelete,c=o.handleCardLike,l=o.handleCardDislike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._link=t.link,this._name=t.name,this._likes=t.likes.length,this._user=r,this._id=t._id,this._cardSelector=n,this._handleCardClick=i,this._handleButtonTrash=u,this._handlePopupDelete=a,this._handleCardLike=c,this._handleCardDislike=l},(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._element.querySelector(".element__image").src=this._link,this._element.querySelector(".element__name").textContent=this._name,this._data.likes.some((function(t){return t._id===e._user._id}))?this._element.querySelector(".element__button-like").classList.add("element__button-like-active"):this._element.querySelector(".element__button-like").classList.remove("element__button-like-active"),0==this._data.likes.length?(this._element.querySelector(".element__likes").textContent=[],this._element.querySelector(".element__button-like").classList.remove("element__button-like-active")):this._element.querySelector(".element__likes").textContent=this._data.likes.length,this._element.querySelector(".element__image").alt="imagen de ".concat(this._name," "),this._element.querySelector(".element__button-like").addEventListener("click",(function(t){e.handleCardLike(t)})),this.handlePopupDelete(),this._handleButtonTrash||this._element.querySelector(".element__button-trash").classList.add("element__button-trash-hide"),this._element.querySelector(".element__button-trash").addEventListener("click",(function(t){e._handlePopupDelete(e._id,(function(){e._element.remove()}))})),this.handleCardClick(),this.handlePopupDelete(),this._element}},{key:"handleCardClick",value:function(e){this._element.querySelector(".element__image").addEventListener("click",this._handleCardClick)}},{key:"handlePopupDelete",value:function(e){this._element.remove()}},{key:"handleCardLike",value:function(e){var t=this;this._data.likes.some((function(e){return e._id===t._user._id}))?this._handleCardDislike(this._id).then((function(n){t._data=n,e.target.classList.remove("element__button-like-active"),0==t._data.likes.length?t._element.querySelector(".element__likes").textContent=[]:t._element.querySelector(".element__likes").textContent=t._data.likes.length})):this._handleCardLike(this._id).then((function(n){t._data=n,e.target.classList.add("element__button-like-active"),t._element.querySelector(".element__likes").textContent=t._data.likes.length}))}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupSelector=t,this._popupCloseButton=this.popupSelector.querySelector(".popup__close-button"),this._handleEscClose=this._handleEscClose.bind(this),this.setEventListeners()},(t=[{key:"open",value:function(){this.popupSelector.classList.add("popup__opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this.popupSelector.classList.remove("popup__opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupCloseButton.addEventListener("click",(function(){e.close()})),this.popupSelector.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}function f(e,t,n){return t=m(t),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(null,arguments)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=f(this,t,[e]))._popupImage=n.popupSelector.querySelector(".popup__image"),n._popupTitle=n.popupSelector.querySelector(".popup__title-image"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,r=[{key:"open",value:function(e,n){var r,o,i;(r=t,o=this,i=y(m(1&3?r.prototype:r),"open",o),function(e){return i.apply(o,e)})([]),this._popupImage.src=e,this._popupImage.alt="imagen de ".concat(n," "),this._popupTitle.textContent=n}}],r&&l(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(a);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}function S(e,t,n){return t=w(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function k(e,t,n,r){var o=C(w(1&r?e.prototype:e),t,n);return 2&r?function(e){return o.apply(n,e)}:o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(null,arguments)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var j=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(r=[{key:"close",value:function(){var e=this.popupSelector.querySelector(".popup__form");k(t,"close",this,3)([]),e.reset()}},{key:"_getInputValues",value:function(){var e={},t=this.popupSelector.querySelector(".popup__form");return Array.from(t.querySelectorAll(".popup__form-input")).forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){k(t,"setEventListeners",this,3)([]),this.popupSelector.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault()}))}}])&&b(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(a);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}function q(e,t,n){return t=D(t),function(e,t){if(t&&("object"==P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,T()?Reflect.construct(t,n||[],D(e).constructor):t.apply(e,n))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}function x(e,t,n,r){var o=I(D(1&r?e.prototype:e),t,n);return 2&r?function(e){return o.apply(n,e)}:o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},I.apply(null,arguments)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}var U=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=q(this,t,[e])).setEventListeners(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e){x(t,"open",this,3)([]),this._handleDeleteSubmit=e}},{key:"close",value:function(){x(t,"close",this,3)([])}},{key:"setEventListeners",value:function(){var e=this;x(t,"setEventListeners",this,3)([]),this.popupSelector.querySelector(".popup__form").addEventListener("submit",(function(t){t.preventDefault(),e._handleDeleteSubmit()}))}}])&&O(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(a);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}var A=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t,this._authorization=n},t=[{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"patchUserInfo",value:function(e,t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"postNewCard",value:function(e,t){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._authorization,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"putLike",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"patchUserAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}],t&&z(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}var H=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formConfig=t,this.formSelector=n},(t=[{key:"_showInputError",value:function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.nextElementSibling.classList.add(this.formConfig.inputErrorClass),r.textContent=n,r.classList.add(this.formConfig.errorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.nextElementSibling.classList.remove(this.formConfig.inputErrorClass),n.classList.remove(this.formConfig.errorClass),n.textContent=""}},{key:"_checkInputValidity",value:function(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(e,t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.disabled=!0,t.classList.add(this.formConfig.inactiveButtonClass),t.classList.remove(this.formConfig.activeButtonClass)):(t.disabled=!1,t.classList.remove(this.formConfig.inactiveButtonClass),t.classList.add(this.formConfig.activeButtonClass))}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this.formConfig.inputSelector)),r=e.querySelector(this.formConfig.submitButtonSelector);this._toggleButtonState(n,r),n.forEach((function(o){o.addEventListener("input",(function(){t._checkInputValidity(e,o),t._toggleButtonState(n,r)}))}))}},{key:"enableValidation",value:function(){var e=this;this.formSelector.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(this.formSelector.querySelectorAll(this.formConfig.fieldsetSelector)).forEach((function(t){e._setEventListeners(t)}))}},{key:"resetValidation",value:function(){var e=this;Array.from(this.formSelector.querySelectorAll(".popup__form-input")).forEach((function(t){t.nextElementSibling.classList.remove("popup__form-input_error");var n=e.formSelector.querySelector(".".concat(t.id,"-error"));n.classList.remove("popup__input-error_active"),n.textContent=""}));var t=this.formSelector.querySelector(".popup__form-button");t.disabled=!0,t.classList.add("popup__form-button_disabled"),t.classList.remove("popup__form-button_active")}}])&&V(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),F=document.querySelector(".profile__button-edit"),M=document.querySelector(".profile__avatar-edit"),K=document.querySelector(".profile__button-add"),Q=document.querySelector(".popup-profile"),W=document.querySelector(".popup-profile-avatar"),X=document.querySelector(".popup-elements"),Y=document.querySelector(".popup-image-fullscreen"),Z=document.querySelector(".popup-delete-card"),$=X.querySelector(".popup__form-title"),ee=X.querySelector(".popup__form-link"),te=X.querySelector(".popup__form-image"),ne=document.querySelector(".popup__form-avatar"),re=document.querySelector(".popup__profile-avatar"),oe=document.querySelector(".elements"),ie=Q.querySelector(".popup__form-profile"),ue=document.querySelector(".profile__name"),ae=document.querySelector(".profile__job"),ce=document.querySelector(".popup__form-name"),le=document.querySelector(".popup__form-job"),se=document.querySelector(".profile__avatar"),fe=document.querySelector(".popup__create-button"),pe=document.querySelector(".popup__delete-button"),ye=document.querySelector(".popup__save-button-avatar"),me=document.querySelector(".popup__save-button-profile"),he=document.querySelector(".spinner"),de={inputSelector:".popup__form-input",submitButtonSelector:".popup__form-button",inactiveButtonClass:"popup__form-button_disabled",activeButtonClass:"popup__form-button_active",inputErrorClass:"popup__form-input_error",errorClass:"popup__input-error_active",fieldsetSelector:".popup__form-set"},ve=new d(Y),be=new j(Q),_e=new j(W),Se=new j(X),ge=new U(Z),ke=new A("https://around.nomoreparties.co/v1/web_es_10","541d0e53-114b-4fb1-9af0-b09c04c191b9"),Ce=new H(de,ie),we=new H(de,te),Ee=new H(de,ne);function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oe(r.key),r)}}function Oe(e){var t=function(e){if("object"!=je(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==je(t)?t:t+""}var Le=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=n},(t=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"addItemPrep",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderer",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}}])&&Pe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xe(r.key),r)}}function xe(e){var t=function(e){if("object"!=qe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qe(t)?t:t+""}var Ie=function(){return e=function e(t){var n=t.userName,r=t.userJob;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=n,this.userJob=r},t=[{key:"getUserInfo",value:function(){this._newUserName=this.userName.textContent,this._newUserJob=this.userJob.textContent}},{key:"setUserInfoForm",value:function(e,t){this.getUserInfo(),e.value=this.userName,t.value=this.userJob}},{key:"setUserInfoProfile",value:function(e,t){this.getUserInfo(),e.textContent=this.userName,t.textContent=this.userJob}}],t&&Te(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function De(e){e?he.classList.add("spinner__visible"):he.classList.remove("spinner__visible")}ie.addEventListener("submit",(function(e){e.preventDefault(),me.textContent="Guardando...",ue.textContent=ce.value,ae.textContent=le.value,ke.patchUserInfo(ce.value,le.value).finally((function(){me.textContent="Guardar",be.close()}))})),te.addEventListener("submit",(function(e){e.preventDefault(),fe.textContent="Creando...",ke.postNewCard($.value,ee.value).then((function(e){ke.getUserInfo().then((function(t){var n=new Le({items:[e],renderer:function(e){var o=new r(e,".element__template",t,{handleCardClick:function(){ve.open(e.link,e.name)},handleButtonTrash:t._id==e.owner._id,handlePopupDelete:function(e,t){ge.open((function(){pe.textContent="Borrando...",ke.deleteCard(e).then((function(){t(),pe.textContent="¿Estás seguro/a?",ge.close()}))}))},handleCardLike:function(e){return ke.putLike(e)},handleCardDislike:function(e){return ke.deleteLike(e)}}).generateCard();n.addItemPrep(o)}},oe);n.renderer()}))})).finally((function(){fe.textContent="Crear",Se.close()})),te.reset()})),F.addEventListener("click",(function(){be.open(),ke.getUserInfo().then((function(e){new Ie({userName:e.name,userJob:e.about}).setUserInfoForm(ce,le)})),Ce.resetValidation()})),K.addEventListener("click",(function(){Se.open(),we.resetValidation()})),M.addEventListener("click",(function(){_e.open(),Ee.resetValidation()})),ne.addEventListener("submit",(function(e){e.preventDefault(),ye.textContent="Guardando...",ke.patchUserAvatar(re.value).finally((function(){ye.textContent="Guardar",_e.close()})),se.src=re.value})),ke.getUserInfo().then((function(e){De(!0),ke.getInitialCards().then((function(t){var n=new Le({items:t,renderer:function(t){var o=new r(t,".element__template",e,{handleCardClick:function(){ve.open(t.link,t.name)},handleButtonTrash:e._id==t.owner._id,handlePopupDelete:function(e,t){ge.open((function(){pe.textContent="Borrando...",ke.deleteCard(e).then((function(){t(),pe.textContent="¿Estás seguro/a?",ge.close()}))}))},handleCardLike:function(e){return ke.putLike(e)},handleCardDislike:function(e){return ke.deleteLike(e)}}).generateCard();n.addItem(o)}},oe);n.renderer(),De(!1)}))})),ue.textContent="Cargando...",ae.textContent="Cargando...",ke.getUserInfo().then((function(e){var t=new Ie({userName:e.name,userJob:e.about});se.src=e.avatar,t.setUserInfoProfile(ue,ae)})),Ce.enableValidation(),we.enableValidation(),Ee.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgdXNlcixcclxuICAgIHtcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgICBoYW5kbGVCdXR0b25UcmFzaCxcclxuICAgICAgaGFuZGxlUG9wdXBEZWxldGUsXHJcbiAgICAgIGhhbmRsZUNhcmRMaWtlLFxyXG4gICAgICBoYW5kbGVDYXJkRGlzbGlrZSxcclxuICAgIH1cclxuICApIHtcclxuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXMubGVuZ3RoO1xyXG4gICAgdGhpcy5fdXNlciA9IHVzZXI7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlQnV0dG9uVHJhc2ggPSBoYW5kbGVCdXR0b25UcmFzaDtcclxuICAgIHRoaXMuX2hhbmRsZVBvcHVwRGVsZXRlID0gaGFuZGxlUG9wdXBEZWxldGU7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZERpc2xpa2UgPSBoYW5kbGVDYXJkRGlzbGlrZTtcclxuICB9XHJcbiAgLy9Db3BpYXIgdGVtcGxhdGVcclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuICAvL0dlbmVyYXIgVGFyamV0YVxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX25hbWVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIGlmICh0aGlzLl9kYXRhLmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VyLl9pZCkpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2J1dHRvbi1saWtlXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19idXR0b24tbGlrZS1hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRfX2J1dHRvbi1saWtlLWFjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5fZGF0YS5saWtlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZXNcIikudGV4dENvbnRlbnQgPSBbXTtcclxuICAgICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2J1dHRvbi1saWtlXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19idXR0b24tbGlrZS1hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZXNcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICAgIHRoaXMuX2RhdGEubGlrZXMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZWxlbWVudF9faW1hZ2VcIlxyXG4gICAgKS5hbHQgPSBgaW1hZ2VuIGRlICR7dGhpcy5fbmFtZX0gYDtcclxuICAgIC8vTGlrZSBidXR0b25cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYXJkTGlrZShldnQpO1xyXG4gICAgICB9KTtcclxuICAgIC8vVHJhc2ggYnV0dG9uXHJcbiAgICB0aGlzLmhhbmRsZVBvcHVwRGVsZXRlKCk7XHJcbiAgICBpZiAodGhpcy5faGFuZGxlQnV0dG9uVHJhc2gpIHtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idXR0b24tdHJhc2hcIilcclxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2J1dHRvbi10cmFzaC1oaWRlXCIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idXR0b24tdHJhc2hcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlUG9wdXBEZWxldGUodGhpcy5faWQsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgLy9BYnJpciBwb3B1cCBpbWFnZVxyXG4gICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2soKTtcclxuICAgIHRoaXMuaGFuZGxlUG9wdXBEZWxldGUoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuICBoYW5kbGVDYXJkQ2xpY2soZXZ0KSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcclxuICB9XHJcbiAgaGFuZGxlUG9wdXBEZWxldGUoZXZ0KSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuICBoYW5kbGVDYXJkTGlrZShldnQpIHtcclxuICAgIGlmICh0aGlzLl9kYXRhLmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VyLl9pZCkpIHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZERpc2xpa2UodGhpcy5faWQpLnRoZW4oKGNhcmQpID0+IHtcclxuICAgICAgICB0aGlzLl9kYXRhID0gY2FyZDtcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19idXR0b24tbGlrZS1hY3RpdmVcIik7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RhdGEubGlrZXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlc1wiKS50ZXh0Q29udGVudCA9IFtdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZXNcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICB0aGlzLl9kYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2UodGhpcy5faWQpLnRoZW4oKGNhcmQpID0+IHtcclxuICAgICAgICB0aGlzLl9kYXRhID0gY2FyZDtcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19idXR0b24tbGlrZS1hY3RpdmVcIik7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VzXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgICAgIHRoaXMuX2RhdGEubGlrZXMubGVuZ3RoO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMucG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwX19jbG9zZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMucG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLnBvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMucG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190aXRsZS1pbWFnZVwiKTtcclxuICB9XHJcbiAgb3BlbihsaW5rLCBuYW1lKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGBpbWFnZW4gZGUgJHtuYW1lfSBgO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBjb25zdCBmb3JtID0gdGhpcy5wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgY29uc3QgZm9ybSA9IHRoaXMucG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taW5wdXRcIikpLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgY29uc3QgZm9ybSA9IHRoaXMucG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuICBvcGVuKGhhbmRsZURlbGV0ZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlU3VibWl0ID0gaGFuZGxlRGVsZXRlU3VibWl0O1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMucG9wdXBTZWxlY3RvclxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZVN1Ym1pdCgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih1cmwsIGF1dGhvcml6YXRpb24pIHtcclxuICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgIHRoaXMuX2F1dGhvcml6YXRpb24gPSBhdXRob3JpemF0aW9uO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgcGF0Y2hVc2VySW5mbyhuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBwb3N0TmV3Q2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgcHV0TGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIHBhdGNoVXNlckF2YXRhcihhdmF0YXJMaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogYXZhdGFyTGluayxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybUNvbmZpZywgZm9ybVNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLmZvcm1Db25maWcgPSBmb3JtQ29uZmlnO1xyXG4gICAgdGhpcy5mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XHJcbiAgfVxyXG4gIF9zaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZChcclxuICAgICAgdGhpcy5mb3JtQ29uZmlnLmlucHV0RXJyb3JDbGFzc1xyXG4gICAgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuZm9ybUNvbmZpZy5lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgX2hpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgdGhpcy5mb3JtQ29uZmlnLmlucHV0RXJyb3JDbGFzc1xyXG4gICAgKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZm9ybUNvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoXHJcbiAgICAgICAgZm9ybUVsZW1lbnQsXHJcbiAgICAgICAgaW5wdXRFbGVtZW50LFxyXG4gICAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZVxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmZvcm1Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmZvcm1Db25maWcuYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5mb3JtQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5mb3JtQ29uZmlnLmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50KSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuZm9ybUNvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLmZvcm1Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuZm9ybVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCh0aGlzLmZvcm1Db25maWcuZmllbGRzZXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBmaWVsZHNldExpc3QuZm9yRWFjaCgoZmllbGRzZXQpID0+IHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoZmllbGRzZXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taW5wdXRcIilcclxuICAgICk7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgICBcInBvcHVwX19mb3JtLWlucHV0X2Vycm9yXCJcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICAgKTtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXBfX2Zvcm0tYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19mb3JtLWJ1dHRvbl9kaXNhYmxlZFwiKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19mb3JtLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuXHJcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1lZGl0XCIpO1xyXG5jb25zdCBhdmF0YXJFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItZWRpdFwiKTtcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xyXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLXByb2ZpbGVcIik7XHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1wcm9maWxlLWF2YXRhclwiKTtcclxuY29uc3QgcG9wdXBFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtZWxlbWVudHNcIik7XHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWltYWdlLWZ1bGxzY3JlZW5cIik7XHJcbmNvbnN0IHBvcHVwRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1kZWxldGUtY2FyZFwiKTtcclxuY29uc3QgaW5wdXRUaXRsZSA9IHBvcHVwRWxlbWVudHMucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS10aXRsZVwiKTtcclxuY29uc3QgaW5wdXRMaW5rID0gcG9wdXBFbGVtZW50cy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWxpbmtcIik7XHJcbmNvbnN0IGVsZW1lbnRGb3JtID0gcG9wdXBFbGVtZW50cy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWltYWdlXCIpO1xyXG5jb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1hdmF0YXJcIik7XHJcbmNvbnN0IGF2YXRhckxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wcm9maWxlLWF2YXRhclwiKTtcclxuY29uc3QgZWxlbWVudHNBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcclxuY29uc3QgcHJvZmlsZUZvcm0gPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1wcm9maWxlXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fam9iXCIpO1xyXG5jb25zdCBuYW1lRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tbmFtZVwiKTtcclxuY29uc3Qgam9iRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tam9iXCIpO1xyXG5jb25zdCBhdmF0YXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xyXG5jb25zdCBjcmVhdGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jcmVhdGUtYnV0dG9uXCIpO1xyXG5jb25zdCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19kZWxldGUtYnV0dG9uXCIpO1xyXG5jb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlLWJ1dHRvbi1hdmF0YXJcIik7XHJcbmNvbnN0IHByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlLWJ1dHRvbi1wcm9maWxlXCIpO1xyXG5jb25zdCBzcGlubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zcGlubmVyXCIpO1xyXG5cclxuY29uc3QgZm9ybUNvbmZpZyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19mb3JtLWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19mb3JtLWJ1dHRvbl9hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2Zvcm0taW5wdXRfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICBmaWVsZHNldFNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1zZXRcIixcclxufTtcclxuXHJcbi8vSW5zdGFuY2lhcyBQb3B1cHNcclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cEltYWdlKTtcclxuY29uc3QgcHJvZmlsZUZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwUHJvZmlsZSk7XHJcbmNvbnN0IGF2YXRhckZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQXZhdGFyKTtcclxuY29uc3QgZWxlbWVudEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWxlbWVudHMpO1xyXG5jb25zdCBkZWxldGVGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHBvcHVwRGVsZXRlKTtcclxuXHJcbi8vaW5zdGFuY2lhIEFwaVxyXG5jb25zdCBhcGlUcmlwbGUgPSBuZXcgQXBpKFxyXG4gIFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfMTBcIixcclxuICBcIjU0MWQwZTUzLTExNGItNGZiMS05YWYwLWIwOWMwNGMxOTFiOVwiXHJcbik7XHJcbi8vSW5zdGFuY2lhcyBGb3JtVmFsaWRhdG9yXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIHByb2ZpbGVGb3JtKTtcclxuY29uc3QgaW1hZ2VGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGVsZW1lbnRGb3JtKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlnLCBhdmF0YXJGb3JtKTtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkRpc25leSAsIFVTQVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwNTQ0Mzc5MTYwNy04MGEyNTlkZDNjM2M/cT04MCZ3PTE5NzQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkVpZmZlbCAsIEZyYW5jaWFcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MTE3MzkwMDE0ODYtNmJmZTEwY2U3ODVmP3E9ODAmdz0xOTc0JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJGdWVudGUgZGUgVHJldmkgLCBJdGFsaWFcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTY2MjcxMTY3OTAtYWY2ZjQ2ZGRkYmRhP3E9ODAmdz0yMDcwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJQdWVibGEgLCBNw6l4aWNvXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjY2OTE4MDU3NTkyLWI5YjljOThmYjk1Mj9xPTgwJnc9MjA2OSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF6aW8gLCBSb21hXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE0MTE5MTg5MTQ3LWM1NTA3NWNiYTc4MT9xPTgwJnc9MTk3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiWXVjYXTDoW4gLCBNw6l4aWNvXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcGx1cy51bnNwbGFzaC5jb20vcHJlbWl1bV9waG90by0xNjc2NTE3MzA4OTcwLTk5ZjgxNjE0ZjRmMj9xPTgwJnc9MTk3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IHtcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlSm9iLFxyXG4gIG5hbWVGb3JtLFxyXG4gIGpvYkZvcm0sXHJcbiAgcG9wdXBQcm9maWxlLFxyXG4gIHBvcHVwQXZhdGFyLFxyXG4gIGVkaXRCdXR0b24sXHJcbiAgYXZhdGFyRWRpdEJ1dHRvbixcclxuICBwb3B1cEVsZW1lbnRzLFxyXG4gIGFkZEJ1dHRvbixcclxuICBwcm9maWxlRm9ybSxcclxuICBlbGVtZW50c0FyZWEsXHJcbiAgZWxlbWVudEZvcm0sXHJcbiAgYXZhdGFyRm9ybSxcclxuICBhdmF0YXJMaW5rLFxyXG4gIGF2YXRhckltYWdlLFxyXG4gIGlucHV0VGl0bGUsXHJcbiAgaW5wdXRMaW5rLFxyXG4gIHBvcHVwSW1hZ2UsXHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIGZvcm1Db25maWcsXHJcbiAgcG9wdXBEZWxldGUsXHJcbiAgY3JlYXRlQnV0dG9uLFxyXG4gIGRlbGV0ZUJ1dHRvbixcclxuICBhdmF0YXJCdXR0b24sXHJcbiAgcHJvZmlsZUJ1dHRvbixcclxuICBpbWFnZVBvcHVwLFxyXG4gIHByb2ZpbGVGb3JtUG9wdXAsXHJcbiAgYXZhdGFyRm9ybVBvcHVwLFxyXG4gIGVsZW1lbnRGb3JtUG9wdXAsXHJcbiAgZGVsZXRlRm9ybVBvcHVwLFxyXG4gIGFwaVRyaXBsZSxcclxuICBwcm9maWxlRm9ybVZhbGlkYXRpb24sXHJcbiAgaW1hZ2VGb3JtVmFsaWRhdGlvbixcclxuICBhdmF0YXJGb3JtVmFsaWRhdGlvbixcclxuICBzcGlubmVyLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XG4gIH1cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuICBhZGRJdGVtUHJlcChlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgfVxuICByZW5kZXJlcigpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJKb2IgfSkge1xyXG4gICAgdGhpcy51c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy51c2VySm9iID0gdXNlckpvYjtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl9uZXdVc2VyTmFtZSA9IHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9uZXdVc2VySm9iID0gdGhpcy51c2VySm9iLnRleHRDb250ZW50O1xyXG4gIH1cclxuICBzZXRVc2VySW5mb0Zvcm0oZm9ybU5hbWUsIGZvcm1Kb2IpIHtcclxuICAgIHRoaXMuZ2V0VXNlckluZm8oKTtcclxuICAgIGZvcm1OYW1lLnZhbHVlID0gdGhpcy51c2VyTmFtZTtcclxuICAgIGZvcm1Kb2IudmFsdWUgPSB0aGlzLnVzZXJKb2I7XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvUHJvZmlsZShwcm9maWxlTmFtZSwgcHJvZmlsZUpvYikge1xyXG4gICAgdGhpcy5nZXRVc2VySW5mbygpO1xyXG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB0aGlzLnVzZXJOYW1lO1xyXG4gICAgcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IHRoaXMudXNlckpvYjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlSm9iLFxyXG4gIG5hbWVGb3JtLFxyXG4gIGpvYkZvcm0sXHJcbiAgcHJvZmlsZUZvcm0sXHJcbiAgZWxlbWVudHNBcmVhLFxyXG4gIGVsZW1lbnRGb3JtLFxyXG4gIGlucHV0VGl0bGUsXHJcbiAgaW5wdXRMaW5rLFxyXG4gIGFkZEJ1dHRvbixcclxuICBlZGl0QnV0dG9uLFxyXG4gIGF2YXRhckVkaXRCdXR0b24sXHJcbiAgYXZhdGFyRm9ybSxcclxuICBhdmF0YXJMaW5rLFxyXG4gIGF2YXRhckltYWdlLFxyXG4gIGNyZWF0ZUJ1dHRvbixcclxuICBkZWxldGVCdXR0b24sXHJcbiAgcHJvZmlsZUJ1dHRvbixcclxuICBhdmF0YXJCdXR0b24sXHJcbiAgYXBpVHJpcGxlLFxyXG4gIHByb2ZpbGVGb3JtUG9wdXAsXHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0aW9uLFxyXG4gIGltYWdlUG9wdXAsXHJcbiAgZGVsZXRlRm9ybVBvcHVwLFxyXG4gIGF2YXRhckZvcm1Qb3B1cCxcclxuICBlbGVtZW50Rm9ybVBvcHVwLFxyXG4gIGltYWdlRm9ybVZhbGlkYXRpb24sXHJcbiAgYXZhdGFyRm9ybVZhbGlkYXRpb24sXHJcbiAgc3Bpbm5lcixcclxufSBmcm9tIFwiLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5cclxuLy9GdW5jacOzbiBlZGl0YXIgcGVyZmlsXHJcbnByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAvL0ZsYWcgZ3VhcmRhbmRvIHBlcmZpbFxyXG4gIHByb2ZpbGVCdXR0b24udGV4dENvbnRlbnQgPSBcIkd1YXJkYW5kby4uLlwiO1xyXG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZUZvcm0udmFsdWU7XHJcbiAgcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IGpvYkZvcm0udmFsdWU7XHJcbiAgYXBpVHJpcGxlLnBhdGNoVXNlckluZm8obmFtZUZvcm0udmFsdWUsIGpvYkZvcm0udmFsdWUpLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgcHJvZmlsZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xyXG4gICAgcHJvZmlsZUZvcm1Qb3B1cC5jbG9zZSgpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8vRnVuY2nDs24gYWdyZWdhciB0YXJqZXRhXHJcbmVsZW1lbnRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAvL0ZsYWcgY3JlYW5kbyB0YXJqZXRhXHJcbiAgY3JlYXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmVhbmRvLi4uXCI7XHJcbiAgYXBpVHJpcGxlXHJcbiAgICAucG9zdE5ld0NhcmQoaW5wdXRUaXRsZS52YWx1ZSwgaW5wdXRMaW5rLnZhbHVlKVxyXG4gICAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICAgIGFwaVRyaXBsZS5nZXRVc2VySW5mbygpLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpdGVtczogW2NhcmRzXSxcclxuICAgICAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIFwiLmVsZW1lbnRfX3RlbXBsYXRlXCIsIHVzZXIsIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpbWFnZVBvcHVwLm9wZW4oaXRlbS5saW5rLCBpdGVtLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGhhbmRsZUJ1dHRvblRyYXNoOiB1c2VyLl9pZCA9PSBpdGVtLm93bmVyLl9pZCxcclxuICAgICAgICAgICAgICAgIGhhbmRsZVBvcHVwRGVsZXRlOiAoY2FyZElkLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBkZWxldGVGb3JtUG9wdXAub3BlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9GbGFnIGJvcnJhciB0YXJqZXRhXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJCb3JyYW5kby4uLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaVRyaXBsZS5kZWxldGVDYXJkKGNhcmRJZCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCLCv0VzdMOhcyBzZWd1cm8vYT9cIjtcclxuICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUZvcm1Qb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVDYXJkTGlrZTogKGNhcmRJZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gYXBpVHJpcGxlLnB1dExpa2UoY2FyZElkKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVDYXJkRGlzbGlrZTogKGNhcmRJZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gYXBpVHJpcGxlLmRlbGV0ZUxpa2UoY2FyZElkKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICAgICAgICAgIG5ld0NhcmRFbGVtZW50LmFkZEl0ZW1QcmVwKGNhcmRFbGVtZW50KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBlbGVtZW50c0FyZWFcclxuICAgICAgICApO1xyXG4gICAgICAgIG5ld0NhcmRFbGVtZW50LnJlbmRlcmVyKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY3JlYXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmVhclwiO1xyXG4gICAgICBlbGVtZW50Rm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICBlbGVtZW50Rm9ybS5yZXNldCgpO1xyXG59KTtcclxuXHJcbi8vRnVuY2nDs24gYWN0dWFsaXphciBpbmZvcm1hY2nDs24gZGVsIHBlcmZpbFxyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgcHJvZmlsZUZvcm1Qb3B1cC5vcGVuKCk7XHJcbiAgYXBpVHJpcGxlLmdldFVzZXJJbmZvKCkudGhlbigodXNlcikgPT4ge1xyXG4gICAgY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gICAgICB1c2VyTmFtZTogdXNlci5uYW1lLFxyXG4gICAgICB1c2VySm9iOiB1c2VyLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mb0Zvcm0obmFtZUZvcm0sIGpvYkZvcm0pO1xyXG4gIH0pO1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIGVsZW1lbnRGb3JtUG9wdXAub3BlbigpO1xyXG4gIGltYWdlRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5hdmF0YXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgYXZhdGFyRm9ybVBvcHVwLm9wZW4oKTtcclxuICBhdmF0YXJGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG4vL0Z1bmNpw7NuIHJlbXBsYXphciBpbWFnZW4gZGUgYXZhdGFyXHJcbmF2YXRhckZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGF2YXRhckJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhbmRvLi4uXCI7XHJcbiAgYXBpVHJpcGxlLnBhdGNoVXNlckF2YXRhcihhdmF0YXJMaW5rLnZhbHVlKS5maW5hbGx5KCgpID0+IHtcclxuICAgIGF2YXRhckJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xyXG4gICAgYXZhdGFyRm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgfSk7XHJcbiAgYXZhdGFySW1hZ2Uuc3JjID0gYXZhdGFyTGluay52YWx1ZTtcclxufSk7XHJcblxyXG4vL0Z1bmNpw7NuIGFjdGl2YXIgc3Bpbm5lclxyXG5mdW5jdGlvbiByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gIGlmIChpc0xvYWRpbmcpIHtcclxuICAgIHNwaW5uZXIuY2xhc3NMaXN0LmFkZChcInNwaW5uZXJfX3Zpc2libGVcIik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNwaW5uZXIuY2xhc3NMaXN0LnJlbW92ZShcInNwaW5uZXJfX3Zpc2libGVcIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBlbGVtZW50c0FyZWEsIHJlbmRlckxvYWRpbmcgfTtcclxuIiwiaW1wb3J0IFwiLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgZWxlbWVudHNBcmVhLCByZW5kZXJMb2FkaW5nIH0gZnJvbSBcIi4vc2NyaXB0cy91dGlscy5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVKb2IsXHJcbiAgcHJvZmlsZU5hbWUsXHJcbiAgYXZhdGFySW1hZ2UsXHJcbiAgYXBpVHJpcGxlLFxyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdGlvbixcclxuICBpbWFnZUZvcm1WYWxpZGF0aW9uLFxyXG4gIGF2YXRhckZvcm1WYWxpZGF0aW9uLFxyXG4gIGltYWdlUG9wdXAsXHJcbiAgZGVsZXRlRm9ybVBvcHVwLFxyXG4gIGRlbGV0ZUJ1dHRvbixcclxufSBmcm9tIFwiLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG4vL0Z1bmNpw7NuIGNhcmdhciBpbWFnZW5lcyBkZSBpbmljaW9cclxuYXBpVHJpcGxlLmdldFVzZXJJbmZvKCkudGhlbigodXNlcikgPT4ge1xyXG4gIC8vRmxhZyBjYXJnYXIgdGFyamV0YXNcclxuICByZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVRyaXBsZS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgY29uc3QgZGVmYXVsdENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogY2FyZHMsXHJcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgXCIuZWxlbWVudF9fdGVtcGxhdGVcIiwgdXNlciwge1xyXG4gICAgICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICBpbWFnZVBvcHVwLm9wZW4oaXRlbS5saW5rLCBpdGVtLm5hbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoYW5kbGVCdXR0b25UcmFzaDogdXNlci5faWQgPT0gaXRlbS5vd25lci5faWQsXHJcbiAgICAgICAgICAgIGhhbmRsZVBvcHVwRGVsZXRlOiAoY2FyZElkLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgICAgICAgIGRlbGV0ZUZvcm1Qb3B1cC5vcGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vRmxhZyBib3JyYXIgdGFyamV0YVxyXG4gICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJCb3JyYW5kby4uLlwiO1xyXG4gICAgICAgICAgICAgICAgYXBpVHJpcGxlLmRlbGV0ZUNhcmQoY2FyZElkKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCLCv0VzdMOhcyBzZWd1cm8vYT9cIjtcclxuICAgICAgICAgICAgICAgICAgZGVsZXRlRm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFuZGxlQ2FyZExpa2U6IChjYXJkSWQpID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gYXBpVHJpcGxlLnB1dExpa2UoY2FyZElkKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFuZGxlQ2FyZERpc2xpa2U6IChjYXJkSWQpID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gYXBpVHJpcGxlLmRlbGV0ZUxpa2UoY2FyZElkKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICAgICAgZGVmYXVsdENhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGVsZW1lbnRzQXJlYVxyXG4gICAgKTtcclxuICAgIGRlZmF1bHRDYXJkTGlzdC5yZW5kZXJlcigpO1xyXG4gICAgcmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy9GdW5jacOzbiBjYXJnYXIgaW5mb3JtYWNpw7NuIGRlIHVzdWFyaW9cclxuLy9GbGFnIGNhcmdhciBpbmZvcm1hY2nDs25cclxucHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBcIkNhcmdhbmRvLi4uXCI7XHJcbnByb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBcIkNhcmdhbmRvLi4uXCI7XHJcbmFwaVRyaXBsZS5nZXRVc2VySW5mbygpLnRoZW4oKHVzZXIpID0+IHtcclxuICBjb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICB1c2VyTmFtZTogdXNlci5uYW1lLFxyXG4gICAgdXNlckpvYjogdXNlci5hYm91dCxcclxuICB9KTtcclxuICAvL0NhcmdhciBhdmF0YXJcclxuICBhdmF0YXJJbWFnZS5zcmMgPSB1c2VyLmF2YXRhcjtcclxuICBwcm9maWxlSW5mby5zZXRVc2VySW5mb1Byb2ZpbGUocHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IpO1xyXG59KTtcclxuXHJcbi8vQWN0aXZhciB2YWxpZGFjaW9uZXMgZGUgZm9ybXVsYXJpb3NcclxucHJvZmlsZUZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuaW1hZ2VGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwidXNlciIsIl9yZWYiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVCdXR0b25UcmFzaCIsImhhbmRsZVBvcHVwRGVsZXRlIiwiaGFuZGxlQ2FyZExpa2UiLCJoYW5kbGVDYXJkRGlzbGlrZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfZGF0YSIsIl9saW5rIiwibGluayIsIl9uYW1lIiwibmFtZSIsIl9saWtlcyIsImxpa2VzIiwibGVuZ3RoIiwiX3VzZXIiLCJfaWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVCdXR0b25UcmFzaCIsIl9oYW5kbGVQb3B1cERlbGV0ZSIsIl9oYW5kbGVDYXJkTGlrZSIsIl9oYW5kbGVDYXJkRGlzbGlrZSIsImtleSIsInZhbHVlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl90aGlzIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJzcmMiLCJ0ZXh0Q29udGVudCIsInNvbWUiLCJsaWtlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiYWx0IiwiY29uY2F0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsIl90aGlzMiIsInRoZW4iLCJjYXJkIiwidGFyZ2V0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2UiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2NhbGxTdXBlciIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJfaW5oZXJpdHMiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybSIsIl9zdXBlclByb3BHZXQiLCJyZXNldCIsImlucHV0VmFsdWVzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVEZWxldGVTdWJtaXQiLCJfaGFuZGxlRGVsZXRlU3VibWl0IiwiQXBpIiwidXJsIiwiYXV0aG9yaXphdGlvbiIsIl91cmwiLCJfYXV0aG9yaXphdGlvbiIsImZldGNoIiwiaGVhZGVycyIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsImF2YXRhckxpbmsiLCJhdmF0YXIiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUNvbmZpZyIsImZvcm1TZWxlY3RvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJhY3RpdmVCdXR0b25DbGFzcyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJmaWVsZHNldFNlbGVjdG9yIiwiZmllbGRzZXQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfdGhpczMiLCJlZGl0QnV0dG9uIiwiYXZhdGFyRWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsInBvcHVwUHJvZmlsZSIsInBvcHVwQXZhdGFyIiwicG9wdXBFbGVtZW50cyIsInBvcHVwSW1hZ2UiLCJwb3B1cERlbGV0ZSIsImlucHV0VGl0bGUiLCJpbnB1dExpbmsiLCJlbGVtZW50Rm9ybSIsImF2YXRhckZvcm0iLCJlbGVtZW50c0FyZWEiLCJwcm9maWxlRm9ybSIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsIm5hbWVGb3JtIiwiam9iRm9ybSIsImF2YXRhckltYWdlIiwiY3JlYXRlQnV0dG9uIiwiZGVsZXRlQnV0dG9uIiwiYXZhdGFyQnV0dG9uIiwicHJvZmlsZUJ1dHRvbiIsInNwaW5uZXIiLCJpbWFnZVBvcHVwIiwicHJvZmlsZUZvcm1Qb3B1cCIsImF2YXRhckZvcm1Qb3B1cCIsImVsZW1lbnRGb3JtUG9wdXAiLCJkZWxldGVGb3JtUG9wdXAiLCJhcGlUcmlwbGUiLCJwcm9maWxlRm9ybVZhbGlkYXRpb24iLCJpbWFnZUZvcm1WYWxpZGF0aW9uIiwiYXZhdGFyRm9ybVZhbGlkYXRpb24iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiaW5uZXJIVE1MIiwiaXRlbSIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySm9iIiwiX25ld1VzZXJOYW1lIiwiX25ld1VzZXJKb2IiLCJmb3JtTmFtZSIsImZvcm1Kb2IiLCJnZXRVc2VySW5mbyIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJwYXRjaFVzZXJJbmZvIiwiZmluYWxseSIsInBvc3ROZXdDYXJkIiwiY2FyZHMiLCJuZXdDYXJkRWxlbWVudCIsImNhcmRFbGVtZW50Iiwib3BlbiIsIm93bmVyIiwiY2FsbGJhY2siLCJkZWxldGVDYXJkIiwicHV0TGlrZSIsImRlbGV0ZUxpa2UiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtUHJlcCIsInNldFVzZXJJbmZvRm9ybSIsInJlc2V0VmFsaWRhdGlvbiIsInBhdGNoVXNlckF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsImRlZmF1bHRDYXJkTGlzdCIsImFkZEl0ZW0iLCJwcm9maWxlSW5mbyIsInNldFVzZXJJbmZvUHJvZmlsZSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9