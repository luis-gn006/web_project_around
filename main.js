!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}e.d({},{tT:function(){return Ee},eC:function(){return Oe},rd:function(){return xe},ke:function(){return qe},nR:function(){return Le},ni:function(){return Ie},y6:function(){return je},QM:function(){return Pe},fs:function(){return Te}});var o=function(){return e=function e(t,n,r,o){var i=o.handleCardClick,u=o.handleButtonTrash,a=o.handlePopupDelete,c=o.handleCardLike,l=o.handleCardDislike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._link=t.link,this._name=t.name,this._likes=t.likes.length,this._user=r,this._id=t._id,this._cardSelector=n,this._handleCardClick=i,this._handleButtonTrash=u,this._handlePopupDelete=a,this._handleCardLike=c,this._handleCardDislike=l},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._element.querySelector(".element__image").src=this._link,this._element.querySelector(".element__name").textContent=this._name,this._data.likes.some((function(t){return t._id===e._user._id}))?this._element.querySelector(".element__button-like").classList.add("element__button-like-active"):this._element.querySelector(".element__button-like").classList.remove("element__button-like-active"),0==this._data.likes.length?(this._element.querySelector(".element__likes").textContent=[],this._element.querySelector(".element__button-like").classList.remove("element__button-like-active")):this._element.querySelector(".element__likes").textContent=this._data.likes.length,this._element.querySelector(".element__image").alt="imagen de ".concat(this._name," "),this._element.querySelector(".element__button-like").addEventListener("click",(function(t){e.handleCardLike(t)})),this.handlePopupDelete(),this._handleButtonTrash||this._element.querySelector(".element__button-trash").classList.add("element__button-trash-hide"),this._element.querySelector(".element__button-trash").addEventListener("click",(function(t){e._handlePopupDelete(e._id,(function(){e._element.remove()}))})),this.handleCardClick(),this.handlePopupDelete(),this._element}},{key:"handleCardClick",value:function(e){this._element.querySelector(".element__image").addEventListener("click",this._handleCardClick)}},{key:"handlePopupDelete",value:function(e){this._element.remove()}},{key:"handleCardLike",value:function(e){var t=this;this._data.likes.some((function(e){return e._id===t._user._id}))?this._handleCardDislike(this._id).then((function(n){t._data=n,e.target.classList.remove("element__button-like-active"),0==t._data.likes.length?t._element.querySelector(".element__likes").textContent=[]:t._element.querySelector(".element__likes").textContent=t._data.likes.length})):this._handleCardLike(this._id).then((function(n){t._data=n,e.target.classList.add("element__button-like-active"),t._element.querySelector(".element__likes").textContent=t._data.likes.length}))}}])&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var c=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formConfig=t,this.formSelector=n},(t=[{key:"_showInputError",value:function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.nextElementSibling.classList.add(this.formConfig.inputErrorClass),r.textContent=n,r.classList.add(this.formConfig.errorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.nextElementSibling.classList.remove(this.formConfig.inputErrorClass),n.classList.remove(this.formConfig.errorClass),n.textContent=""}},{key:"_checkInputValidity",value:function(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(e,t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.disabled=!0,t.classList.add(this.formConfig.inactiveButtonClass),t.classList.remove(this.formConfig.activeButtonClass)):(t.disabled=!1,t.classList.remove(this.formConfig.inactiveButtonClass),t.classList.add(this.formConfig.activeButtonClass))}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this.formConfig.inputSelector)),r=e.querySelector(this.formConfig.submitButtonSelector);this._toggleButtonState(n,r),n.forEach((function(o){o.addEventListener("input",(function(){t._checkInputValidity(e,o),t._toggleButtonState(n,r)}))}))}},{key:"enableValidation",value:function(){var e=this;this.formSelector.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(this.formSelector.querySelectorAll(this.formConfig.fieldsetSelector)).forEach((function(t){e._setEventListeners(t)}))}},{key:"resetValidation",value:function(){var e=this;Array.from(this.formSelector.querySelectorAll(".popup__form-input")).forEach((function(t){t.nextElementSibling.classList.remove("popup__form-input_error");var n=e.formSelector.querySelector(".".concat(t.id,"-error"));n.classList.remove("popup__input-error_active"),n.textContent=""}));var t=this.formSelector.querySelector(".popup__form-button");t.disabled=!0,t.classList.add("popup__form-button_disabled"),t.classList.remove("popup__form-button_active")}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),l=document.querySelector(".profile__button-edit"),s=document.querySelector(".profile__avatar-edit"),f=document.querySelector(".profile__button-add"),p=document.querySelector(".popup-profile"),y=document.querySelector(".popup-profile-avatar"),m=document.querySelector(".popup-elements"),d=document.querySelector(".popup-image-fullscreen"),h=document.querySelector(".popup-delete-card"),v=m.querySelector(".popup__form-title"),b=m.querySelector(".popup__form-link"),_=m.querySelector(".popup__form-image"),S=document.querySelector(".popup__form-avatar"),g=document.querySelector(".popup__profile-avatar"),k=document.querySelector(".elements"),w=p.querySelector(".popup__form"),C=document.querySelector(".profile__name"),j=document.querySelector(".profile__job"),E=document.querySelector(".popup__form-name"),P=document.querySelector(".popup__form-job"),O=document.querySelector(".profile__avatar"),L=document.querySelector(".popup__create-button"),q=document.querySelector(".popup__delete-button"),T=document.querySelector(".popup__save-button-avatar"),I=document.querySelector(".popup__save-button-profile"),x={inputSelector:".popup__form-input",submitButtonSelector:".popup__form-button",inactiveButtonClass:"popup__form-button_disabled",activeButtonClass:"popup__form-button_active",inputErrorClass:"popup__form-input_error",errorClass:"popup__input-error_active",fieldsetSelector:".popup__form-set"};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}var U=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=n},(t=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"addItemPrep",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderer",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}}])&&B(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}var J=function(){return e=function e(t){var n=t.userName,r=t.userJob;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=n,this.userJob=r},t=[{key:"getUserInfo",value:function(){this._newUserName=this.userName.textContent,this._newUserJob=this.userJob.textContent}},{key:"setUserInfoForm",value:function(e,t){this.getUserInfo(),e.value=this.userName,t.value=this.userJob}},{key:"setUserInfoProfile",value:function(e,t){this.getUserInfo(),e.textContent=this.userName,t.textContent=this.userJob}}],t&&N(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}w.addEventListener("submit",(function(e){e.preventDefault(),I.textContent="Guardando...",C.textContent=E.value,j.textContent=P.value,Ee.patchUserInfo(E.value,P.value).finally((function(){I.textContent="Guardar"}))})),_.addEventListener("submit",(function(e){e.preventDefault(),L.textContent="Creando...",Ee.postNewCard(v.value,b.value).then((function(e){Ee.getUserInfo().then((function(t){var n=new U({items:[e],renderer:function(e){console.log(e.owner._id);var r=new o(e,".element__template",t,{handleCardClick:function(){je.open(e.link,e.name)},handleButtonTrash:t._id==e.owner._id,handlePopupDelete:function(e,t){console.log(e),qe.open((function(){Ee.deleteCard(e).then((function(){q.textContent="Borrando...",t().finally((function(){q.textContent="¿Estás seguro/a?"}))}))}))},handleCardLike:function(e){return Ee.putLike(e)},handleCardDislike:function(e){return Ee.deleteLike(e)}}).generateCard();n.addItemPrep(r)}},k);n.renderer()}))})).finally((function(){L.textContent="Crear"})),_.reset()})),l.addEventListener("click",(function(){Pe.open(),Ee.getUserInfo().then((function(e){console.log(e),new J({userName:e.name,userJob:e.about}).setUserInfoForm(E,P)})),Te.resetValidation()})),f.addEventListener("click",(function(){Le.open(),Ie.resetValidation()})),s.addEventListener("click",(function(){Oe.open(),xe.resetValidation()})),S.addEventListener("submit",(function(e){T.textContent="Guardando...",e.preventDefault(),Ee.patchUserAvatar(g.value).finally((function(){T.textContent="Guardar",Oe.close()})),O.src=g.value}));var M=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupSelector=t,this._popupCloseButton=this.popupSelector.querySelector(".popup__close-button"),this._handleEscClose=this._handleEscClose.bind(this),this.setEventListeners()},(t=[{key:"open",value:function(){this.popupSelector.classList.add("popup__opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this.popupSelector.classList.remove("popup__opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupCloseButton.addEventListener("click",(function(){e.close()})),this.popupSelector.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&G(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function K(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}function W(e,t,n){return t=Z(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,X()?Reflect.construct(t,n||[],Z(e).constructor):t.apply(e,n))}function X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X=function(){return!!e})()}function Y(){return Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Y.apply(null,arguments)}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}var ee=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=W(this,t,[e]))._popupImage=n.popupSelector.querySelector(".popup__image"),n._popupTitle=n.popupSelector.querySelector(".popup__title-image"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(t,e),n=t,r=[{key:"open",value:function(e,n){var r,o,i;(r=t,o=this,i=Y(Z(1&3?r.prototype:r),"open",o),function(e){return i.apply(o,e)})([]),this._popupImage.src=e,this._popupImage.alt="imagen de ".concat(n," "),this._popupTitle.textContent=n}}],r&&Q(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(M);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,re(r.key),r)}}function re(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}function oe(e,t,n){return t=ce(t),function(e,t){if(t&&("object"==te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ie()?Reflect.construct(t,n||[],ce(e).constructor):t.apply(e,n))}function ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ie=function(){return!!e})()}function ue(e,t,n,r){var o=ae(ce(1&r?e.prototype:e),t,n);return 2&r?function(e){return o.apply(n,e)}:o}function ae(){return ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ae.apply(null,arguments)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}var se=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(t,e),n=t,(r=[{key:"close",value:function(){var e=this.popupSelector.querySelector(".popup__form");ue(t,"close",this,3)([]),e.reset()}},{key:"_getInputValues",value:function(){var e={},t=this.popupSelector.querySelector(".popup__form");return Array.from(t.querySelectorAll(".popup__form-input")).forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;ue(t,"setEventListeners",this,3)([]),this.popupSelector.querySelector(".popup__form").addEventListener("submit",(function(t){t.preventDefault(),e.close()}))}}])&&ne(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(M);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ye(r.key),r)}}function ye(e){var t=function(e){if("object"!=fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:t+""}function me(e,t,n){return t=be(t),function(e,t){if(t&&("object"==fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,de()?Reflect.construct(t,n||[],be(e).constructor):t.apply(e,n))}function de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(de=function(){return!!e})()}function he(e,t,n,r){var o=ve(be(1&r?e.prototype:e),t,n);return 2&r?function(e){return o.apply(n,e)}:o}function ve(){return ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=be(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ve.apply(null,arguments)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}var Se=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=me(this,t,[e])).setEventListeners(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e){he(t,"open",this,3)([]),this._handleDeleteSubmit=e}},{key:"close",value:function(){he(t,"close",this,3)([])}},{key:"setEventListeners",value:function(){var e=this;he(t,"setEventListeners",this,3)([]),this.popupSelector.querySelector(".popup__form").addEventListener("submit",(function(t){t.preventDefault(),e._handleDeleteSubmit(),e.close()}))}}])&&pe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(M);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function we(e){var t=function(e){if("object"!=ge(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ge(t)?t:t+""}var Ce=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t,this._authorization=n},t=[{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"patchUserInfo",value:function(e,t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"postNewCard",value:function(e,t){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._authorization,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"putLike",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"patchUserAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}],t&&ke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),je=new ee(d),Ee=new Ce("https://around.nomoreparties.co/v1/web_es_10","541d0e53-114b-4fb1-9af0-b09c04c191b9");Ee.getUserInfo().then((function(e){console.log(e),Ee.getInitialCards().then((function(t){console.log(t);var n=new U({items:t,renderer:function(t){console.log(t.owner._id);var r=new o(t,".element__template",e,{handleCardClick:function(){je.open(t.link,t.name)},handleButtonTrash:e._id==t.owner._id,handlePopupDelete:function(e,t){console.log(e),qe.open((function(){Ee.deleteCard(e).then((function(){t()}))}))},handleCardLike:function(e){return Ee.putLike(e)},handleCardDislike:function(e){return Ee.deleteLike(e)}}).generateCard();n.addItem(r)}},k);n.renderer()}))})),Ee.getUserInfo().then((function(e){console.log(e);var t=new J({userName:e.name,userJob:e.about});O.src=e.avatar,t.setUserInfoProfile(C,j)}));var Pe=new se(p),Oe=new se(y),Le=new se(m),qe=new Se(h),Te=new c(x,document.querySelector(".popup__form-profile"));Te.enableValidation();var Ie=new c(x,document.querySelector(".popup__form-image"));Ie.enableValidation();var xe=new c(x,document.querySelector(".popup__form-avatar"));xe.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFtQixJQUFJeUIsR0FBY3hGLEdBQ3JDc0UsR0FBa0IsSUFBSWtCLEdBQWN2RixHQUNwQ21FLEdBQW1CLElBQUlvQixHQUFjdEYsR0FDckNzRCxHQUFrQixJQUFJcUMsR0FBc0J6RixHQUk1QzhELEdBQXdCLElBQUl4RyxFQUN2Q0MsRUFGMEJ2QixTQUFTQyxjQUFjLHlCQUtuRDZILEdBQXNCdUQsbUJBQ3RCLElBQ2FwRCxHQUFzQixJQUFJM0csRUFDckNDLEVBRndCdkIsU0FBU0MsY0FBYyx1QkFLakRnSSxHQUFvQm9ELG1CQUNwQixJQUNhbEQsR0FBdUIsSUFBSTdHLEVBQ3RDQyxFQUZ5QnZCLFNBQVNDLGNBQWMsd0JBS2xEa0ksR0FBcUJrRCxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgdXNlcixcbiAgICB7XG4gICAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgICBoYW5kbGVCdXR0b25UcmFzaCxcbiAgICAgIGhhbmRsZVBvcHVwRGVsZXRlLFxuICAgICAgaGFuZGxlQ2FyZExpa2UsXG4gICAgICBoYW5kbGVDYXJkRGlzbGlrZSxcbiAgICB9XG4gICkge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX3VzZXIgPSB1c2VyO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVCdXR0b25UcmFzaCA9IGhhbmRsZUJ1dHRvblRyYXNoO1xuICAgIHRoaXMuX2hhbmRsZVBvcHVwRGVsZXRlID0gaGFuZGxlUG9wdXBEZWxldGU7XG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2UgPSBoYW5kbGVDYXJkTGlrZTtcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGlzbGlrZSA9IGhhbmRsZUNhcmREaXNsaWtlO1xuICB9XG4gIC8vQ29waWFyIHRlbXBsYXRlXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cbiAgLy9HZW5lcmFyIFRhcmpldGFcbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX25hbWVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgaWYgKHRoaXMuX2RhdGEubGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXIuX2lkKSkge1xuICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idXR0b24tbGlrZVwiKVxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2J1dHRvbi1saWtlLWFjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idXR0b24tbGlrZVwiKVxuICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRfX2J1dHRvbi1saWtlLWFjdGl2ZVwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZGF0YS5saWtlcy5sZW5ndGggPT0gMCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VzXCIpLnRleHRDb250ZW50ID0gW107XG4gICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2J1dHRvbi1saWtlXCIpXG4gICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudF9fYnV0dG9uLWxpa2UtYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZXNcIikudGV4dENvbnRlbnQgPVxuICAgICAgICB0aGlzLl9kYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB9XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5lbGVtZW50X19pbWFnZVwiXG4gICAgKS5hbHQgPSBgaW1hZ2VuIGRlICR7dGhpcy5fbmFtZX0gYDtcbiAgICAvL0xpa2UgYnV0dG9uXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLWxpa2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUNhcmRMaWtlKGV2dCk7XG4gICAgICB9KTtcbiAgICAvL1RyYXNoIGJ1dHRvblxuICAgIHRoaXMuaGFuZGxlUG9wdXBEZWxldGUoKTtcbiAgICBpZiAodGhpcy5faGFuZGxlQnV0dG9uVHJhc2gpIHtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idXR0b24tdHJhc2hcIilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19idXR0b24tdHJhc2gtaGlkZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLXRyYXNoXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlUG9wdXBEZWxldGUodGhpcy5faWQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIC8vQWJyaXIgcG9wdXAgaW1hZ2VcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljaygpO1xuICAgIHRoaXMuaGFuZGxlUG9wdXBEZWxldGUoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuICBoYW5kbGVDYXJkQ2xpY2soZXZ0KSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcbiAgfVxuICBoYW5kbGVQb3B1cERlbGV0ZShldnQpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG4gIGhhbmRsZUNhcmRMaWtlKGV2dCkge1xuICAgIGlmICh0aGlzLl9kYXRhLmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VyLl9pZCkpIHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmREaXNsaWtlKHRoaXMuX2lkKS50aGVuKChjYXJkKSA9PiB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBjYXJkO1xuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19idXR0b24tbGlrZS1hY3RpdmVcIik7XG4gICAgICAgIGlmICh0aGlzLl9kYXRhLmxpa2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VzXCIpLnRleHRDb250ZW50ID0gW107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VzXCIpLnRleHRDb250ZW50ID1cbiAgICAgICAgICAgIHRoaXMuX2RhdGEubGlrZXMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2UodGhpcy5faWQpLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGNhcmQ7XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2J1dHRvbi1saWtlLWFjdGl2ZVwiKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VzXCIpLnRleHRDb250ZW50ID1cbiAgICAgICAgICB0aGlzLl9kYXRhLmxpa2VzLmxlbmd0aDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybUNvbmZpZywgZm9ybVNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLmZvcm1Db25maWcgPSBmb3JtQ29uZmlnO1xyXG4gICAgdGhpcy5mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XHJcbiAgfVxyXG4gIF9zaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZChcclxuICAgICAgdGhpcy5mb3JtQ29uZmlnLmlucHV0RXJyb3JDbGFzc1xyXG4gICAgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuZm9ybUNvbmZpZy5lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgX2hpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgdGhpcy5mb3JtQ29uZmlnLmlucHV0RXJyb3JDbGFzc1xyXG4gICAgKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZm9ybUNvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoXHJcbiAgICAgICAgZm9ybUVsZW1lbnQsXHJcbiAgICAgICAgaW5wdXRFbGVtZW50LFxyXG4gICAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZVxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmZvcm1Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmZvcm1Db25maWcuYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5mb3JtQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5mb3JtQ29uZmlnLmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50KSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuZm9ybUNvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLmZvcm1Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuZm9ybVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCh0aGlzLmZvcm1Db25maWcuZmllbGRzZXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBmaWVsZHNldExpc3QuZm9yRWFjaCgoZmllbGRzZXQpID0+IHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoZmllbGRzZXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taW5wdXRcIilcclxuICAgICk7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgICBcInBvcHVwX19mb3JtLWlucHV0X2Vycm9yXCJcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICAgKTtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXBfX2Zvcm0tYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19mb3JtLWJ1dHRvbl9kaXNhYmxlZFwiKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19mb3JtLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1lZGl0XCIpO1xuY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWVkaXRcIik7XG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1hZGRcIik7XG5jb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLXByb2ZpbGVcIik7XG5jb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtcHJvZmlsZS1hdmF0YXJcIik7XG5jb25zdCBwb3B1cEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1lbGVtZW50c1wiKTtcbmNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWltYWdlLWZ1bGxzY3JlZW5cIik7XG5jb25zdCBwb3B1cERlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtZGVsZXRlLWNhcmRcIik7XG5jb25zdCBpbnB1dFRpdGxlID0gcG9wdXBFbGVtZW50cy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLXRpdGxlXCIpO1xuY29uc3QgaW5wdXRMaW5rID0gcG9wdXBFbGVtZW50cy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWxpbmtcIik7XG5jb25zdCBlbGVtZW50Rm9ybSA9IHBvcHVwRWxlbWVudHMucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1pbWFnZVwiKTtcbmNvbnN0IGF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWF2YXRhclwiKTtcbmNvbnN0IGF2YXRhckxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wcm9maWxlLWF2YXRhclwiKTtcbmNvbnN0IGVsZW1lbnRzQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG5jb25zdCBwcm9maWxlRm9ybSA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19qb2JcIik7XG5jb25zdCBuYW1lRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tbmFtZVwiKTtcbmNvbnN0IGpvYkZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWpvYlwiKTtcbmNvbnN0IGF2YXRhckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5jb25zdCBjcmVhdGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jcmVhdGUtYnV0dG9uXCIpO1xuY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZGVsZXRlLWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3NhdmUtYnV0dG9uLWF2YXRhclwiKTtcbmNvbnN0IHByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlLWJ1dHRvbi1wcm9maWxlXCIpO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkRpc25leSAsIFVTQVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDU0NDM3OTE2MDctODBhMjU5ZGQzYzNjP3E9ODAmdz0xOTc0JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJFaWZmZWwgLCBGcmFuY2lhXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUxMTczOTAwMTQ4Ni02YmZlMTBjZTc4NWY/cT04MCZ3PTE5NzQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkZ1ZW50ZSBkZSBUcmV2aSAsIEl0YWxpYVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTY2MjcxMTY3OTAtYWY2ZjQ2ZGRkYmRhP3E9ODAmdz0yMDcwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJQdWVibGEgLCBNw6l4aWNvXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY2NjkxODA1NzU5Mi1iOWI5Yzk4ZmI5NTI/cT04MCZ3PTIwNjkmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhemlvICwgUm9tYVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTQxMTkxODkxNDctYzU1MDc1Y2JhNzgxP3E9ODAmdz0xOTc0JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJZdWNhdMOhbiAsIE3DqXhpY29cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGx1cy51bnNwbGFzaC5jb20vcHJlbWl1bV9waG90by0xNjc2NTE3MzA4OTcwLTk5ZjgxNjE0ZjRmMj9xPTgwJnc9MTk3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbl07XG5jb25zdCBmb3JtQ29uZmlnID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm0tYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2Zvcm0tYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19mb3JtLWJ1dHRvbl9hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19mb3JtLWlucHV0X2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxuICBmaWVsZHNldFNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1zZXRcIixcbn07XG5cbmV4cG9ydCB7XG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlSm9iLFxuICBuYW1lRm9ybSxcbiAgam9iRm9ybSxcbiAgcG9wdXBQcm9maWxlLFxuICBwb3B1cEF2YXRhcixcbiAgZWRpdEJ1dHRvbixcbiAgYXZhdGFyRWRpdEJ1dHRvbixcbiAgcG9wdXBFbGVtZW50cyxcbiAgYWRkQnV0dG9uLFxuICBwcm9maWxlRm9ybSxcbiAgZWxlbWVudHNBcmVhLFxuICBlbGVtZW50Rm9ybSxcbiAgYXZhdGFyRm9ybSxcbiAgYXZhdGFyTGluayxcbiAgYXZhdGFySW1hZ2UsXG4gIGlucHV0VGl0bGUsXG4gIGlucHV0TGluayxcbiAgcG9wdXBJbWFnZSxcbiAgaW5pdGlhbENhcmRzLFxuICBmb3JtQ29uZmlnLFxuICBwb3B1cERlbGV0ZSxcbiAgY3JlYXRlQnV0dG9uLFxuICBkZWxldGVCdXR0b24sXG4gIGF2YXRhckJ1dHRvbixcbiAgcHJvZmlsZUJ1dHRvbixcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XG4gIH1cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuICBhZGRJdGVtUHJlcChlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgfVxuICByZW5kZXJlcigpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJKb2IgfSkge1xyXG4gICAgdGhpcy51c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy51c2VySm9iID0gdXNlckpvYjtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl9uZXdVc2VyTmFtZSA9IHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9uZXdVc2VySm9iID0gdGhpcy51c2VySm9iLnRleHRDb250ZW50O1xyXG4gIH1cclxuICBzZXRVc2VySW5mb0Zvcm0oZm9ybU5hbWUsIGZvcm1Kb2IpIHtcclxuICAgIHRoaXMuZ2V0VXNlckluZm8oKTtcclxuICAgIGZvcm1OYW1lLnZhbHVlID0gdGhpcy51c2VyTmFtZTtcclxuICAgIGZvcm1Kb2IudmFsdWUgPSB0aGlzLnVzZXJKb2I7XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvUHJvZmlsZShwcm9maWxlTmFtZSwgcHJvZmlsZUpvYikge1xyXG4gICAgdGhpcy5nZXRVc2VySW5mbygpO1xyXG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB0aGlzLnVzZXJOYW1lO1xyXG4gICAgcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IHRoaXMudXNlckpvYjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVKb2IsXG4gIG5hbWVGb3JtLFxuICBqb2JGb3JtLFxuICBwcm9maWxlRm9ybSxcbiAgZWxlbWVudHNBcmVhLFxuICBlbGVtZW50Rm9ybSxcbiAgaW5wdXRUaXRsZSxcbiAgaW5wdXRMaW5rLFxuICBhZGRCdXR0b24sXG4gIGVkaXRCdXR0b24sXG4gIGF2YXRhckVkaXRCdXR0b24sXG4gIGF2YXRhckZvcm0sXG4gIGF2YXRhckxpbmssXG4gIGF2YXRhckltYWdlLFxuICBjcmVhdGVCdXR0b24sXG4gIGRlbGV0ZUJ1dHRvbixcbiAgcHJvZmlsZUJ1dHRvbixcbiAgYXZhdGFyQnV0dG9uLFxufSBmcm9tIFwiLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQge1xuICBwcm9maWxlRm9ybVBvcHVwLFxuICBwcm9maWxlRm9ybVZhbGlkYXRpb24sXG4gIGVsZW1lbnRGb3JtUG9wdXAsXG4gIGltYWdlRm9ybVZhbGlkYXRpb24sXG4gIGltYWdlUG9wdXAsXG4gIGFwaVRyaXBsZSxcbiAgZGVsZXRlRm9ybVBvcHVwLFxuICBhdmF0YXJGb3JtUG9wdXAsXG4gIGF2YXRhckZvcm1WYWxpZGF0aW9uLFxufSBmcm9tIFwiLi4vaW5kZXguanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbi8vRnVuY2nDs24gZWRpdGFyIHByb2ZpbGVcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhbmRvLi4uXCI7XG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZUZvcm0udmFsdWU7XG4gIHByb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBqb2JGb3JtLnZhbHVlO1xuICBhcGlUcmlwbGUucGF0Y2hVc2VySW5mbyhuYW1lRm9ybS52YWx1ZSwgam9iRm9ybS52YWx1ZSkuZmluYWxseSgoKSA9PiB7XG4gICAgcHJvZmlsZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xuICB9KTtcbn1cbnByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuXG4vL0Z1bmNpw7NuIGFncmVnYXIgaW1hZ2VuXG5cbmVsZW1lbnRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGNyZWF0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ3JlYW5kby4uLlwiO1xuICBhcGlUcmlwbGVcbiAgICAucG9zdE5ld0NhcmQoaW5wdXRUaXRsZS52YWx1ZSwgaW5wdXRMaW5rLnZhbHVlKVxuICAgIC50aGVuKChjYXJkcykgPT4ge1xuICAgICAgYXBpVHJpcGxlLmdldFVzZXJJbmZvKCkudGhlbigodXNlcikgPT4ge1xuICAgICAgICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IG5ldyBTZWN0aW9uKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGl0ZW1zOiBbY2FyZHNdLFxuICAgICAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0ub3duZXIuX2lkKTtcbiAgICAgICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIFwiLmVsZW1lbnRfX3RlbXBsYXRlXCIsIHVzZXIsIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGltYWdlUG9wdXAub3BlbihpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoYW5kbGVCdXR0b25UcmFzaDogdXNlci5faWQgPT0gaXRlbS5vd25lci5faWQsXG4gICAgICAgICAgICAgICAgaGFuZGxlUG9wdXBEZWxldGU6IChjYXJkSWQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYXJkSWQpO1xuICAgICAgICAgICAgICAgICAgZGVsZXRlRm9ybVBvcHVwLm9wZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhcGlUcmlwbGUuZGVsZXRlQ2FyZChjYXJkSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQm9ycmFuZG8uLi5cIjtcbiAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCLCv0VzdMOhcyBzZWd1cm8vYT9cIjtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhhbmRsZUNhcmRMaWtlOiAoY2FyZElkKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gYXBpVHJpcGxlLnB1dExpa2UoY2FyZElkKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhhbmRsZUNhcmREaXNsaWtlOiAoY2FyZElkKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gYXBpVHJpcGxlLmRlbGV0ZUxpa2UoY2FyZElkKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgICAgICAgICBuZXdDYXJkRWxlbWVudC5hZGRJdGVtUHJlcChjYXJkRWxlbWVudCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWxlbWVudHNBcmVhXG4gICAgICAgICk7XG4gICAgICAgIG5ld0NhcmRFbGVtZW50LnJlbmRlcmVyKCk7XG4gICAgICB9KTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNyZWF0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ3JlYXJcIjtcbiAgICB9KTtcbiAgZWxlbWVudEZvcm0ucmVzZXQoKTtcbn0pO1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIHByb2ZpbGVGb3JtUG9wdXAub3BlbigpO1xuICAvL0NhcmdhciBpbmZvIHBvcHVwcHJvZmlsZVxuICBhcGlUcmlwbGUuZ2V0VXNlckluZm8oKS50aGVuKCh1c2VyKSA9PiB7XG4gICAgY29uc29sZS5sb2codXNlcik7XG4gICAgY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8oe1xuICAgICAgdXNlck5hbWU6IHVzZXIubmFtZSxcbiAgICAgIHVzZXJKb2I6IHVzZXIuYWJvdXQsXG4gICAgfSk7XG5cbiAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mb0Zvcm0obmFtZUZvcm0sIGpvYkZvcm0pO1xuICB9KTtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgZWxlbWVudEZvcm1Qb3B1cC5vcGVuKCk7XG4gIGltYWdlRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcbmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgYXZhdGFyRm9ybVBvcHVwLm9wZW4oKTtcbiAgYXZhdGFyRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuLy9mdW5jaW9uIHJlbXBsYXphciBpbWFnZW4gYXZhdGFyXG5hdmF0YXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGF2YXRhckJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhbmRvLi4uXCI7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGFwaVRyaXBsZS5wYXRjaFVzZXJBdmF0YXIoYXZhdGFyTGluay52YWx1ZSkuZmluYWxseSgoKSA9PiB7XG4gICAgYXZhdGFyQnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFyXCI7XG4gICAgYXZhdGFyRm9ybVBvcHVwLmNsb3NlKCk7XG4gIH0pO1xuICBhdmF0YXJJbWFnZS5zcmMgPSBhdmF0YXJMaW5rLnZhbHVlO1xufSk7XG5cbmV4cG9ydCB7IGVsZW1lbnRzQXJlYSB9O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMucG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwX19jbG9zZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMucG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLnBvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMucG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190aXRsZS1pbWFnZVwiKTtcclxuICB9XHJcbiAgb3BlbihsaW5rLCBuYW1lKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGBpbWFnZW4gZGUgJHtuYW1lfSBgO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBjb25zdCBmb3JtID0gdGhpcy5wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgY29uc3QgZm9ybSA9IHRoaXMucG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taW5wdXRcIikpLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgY29uc3QgZm9ybSA9IHRoaXMucG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIG9wZW4oaGFuZGxlRGVsZXRlU3VibWl0KSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVTdWJtaXQgPSBoYW5kbGVEZWxldGVTdWJtaXQ7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5wb3B1cFNlbGVjdG9yXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlU3VibWl0KCk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IodXJsLCBhdXRob3JpemF0aW9uKSB7XG4gICAgdGhpcy5fdXJsID0gdXJsO1xuICAgIHRoaXMuX2F1dGhvcml6YXRpb24gPSBhdXRob3JpemF0aW9uO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG4gIHBhdGNoVXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGFib3V0OiBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG4gIHBvc3ROZXdDYXJkKG5hbWUsIGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuICBwdXRMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG4gIHBhdGNoVXNlckF2YXRhcihhdmF0YXJMaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJMaW5rLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IGVsZW1lbnRzQXJlYSB9IGZyb20gXCIuL3NjcmlwdHMvdXRpbHMuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQge1xuICBwb3B1cEltYWdlLFxuICBwb3B1cEVsZW1lbnRzLFxuICBwb3B1cFByb2ZpbGUsXG4gIHBvcHVwQXZhdGFyLFxuICBwcm9maWxlSm9iLFxuICBwcm9maWxlTmFtZSxcbiAgZm9ybUNvbmZpZyxcbiAgcG9wdXBEZWxldGUsXG4gIGF2YXRhckltYWdlLFxufSBmcm9tIFwiLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbi8vSW5zdGFuY2lhIFBvcHVwIFdpdGggSW1hZ2VcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwSW1hZ2UpO1xuLy9DYXJnYXIgaW1hZ2VuZXMgZGVmYXVsdFxuZXhwb3J0IGNvbnN0IGFwaVRyaXBsZSA9IG5ldyBBcGkoXG4gIFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfMTBcIixcbiAgXCI1NDFkMGU1My0xMTRiLTRmYjEtOWFmMC1iMDljMDRjMTkxYjlcIlxuKTtcblxuYXBpVHJpcGxlLmdldFVzZXJJbmZvKCkudGhlbigodXNlcikgPT4ge1xuICBjb25zb2xlLmxvZyh1c2VyKTtcbiAgYXBpVHJpcGxlLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGNhcmRzKSA9PiB7XG4gICAgY29uc29sZS5sb2coY2FyZHMpO1xuICAgIGNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogY2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0ub3duZXIuX2lkKTtcbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgXCIuZWxlbWVudF9fdGVtcGxhdGVcIiwgdXNlciwge1xuICAgICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgIGltYWdlUG9wdXAub3BlbihpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFuZGxlQnV0dG9uVHJhc2g6IHVzZXIuX2lkID09IGl0ZW0ub3duZXIuX2lkLFxuICAgICAgICAgICAgaGFuZGxlUG9wdXBEZWxldGU6IChjYXJkSWQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhcmRJZCk7XG4gICAgICAgICAgICAgIGRlbGV0ZUZvcm1Qb3B1cC5vcGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBhcGlUcmlwbGUuZGVsZXRlQ2FyZChjYXJkSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFuZGxlQ2FyZExpa2U6IChjYXJkSWQpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaVRyaXBsZS5wdXRMaWtlKGNhcmRJZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFuZGxlQ2FyZERpc2xpa2U6IChjYXJkSWQpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaVRyaXBsZS5kZWxldGVMaWtlKGNhcmRJZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgICAgICBkZWZhdWx0Q2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgZWxlbWVudHNBcmVhXG4gICAgKTtcbiAgICBkZWZhdWx0Q2FyZExpc3QucmVuZGVyZXIoKTtcbiAgfSk7XG59KTtcblxuLy9jYXJnYXIgaW5mbyBwcm9maWxlXG5hcGlUcmlwbGUuZ2V0VXNlckluZm8oKS50aGVuKCh1c2VyKSA9PiB7XG4gIGNvbnNvbGUubG9nKHVzZXIpO1xuICBjb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gICAgdXNlck5hbWU6IHVzZXIubmFtZSxcbiAgICB1c2VySm9iOiB1c2VyLmFib3V0LFxuICB9KTtcbiAgLy9jYXJnYXIgYXZhdHIgcHJvZmlsZVxuICBhdmF0YXJJbWFnZS5zcmMgPSB1c2VyLmF2YXRhcjtcblxuICBwcm9maWxlSW5mby5zZXRVc2VySW5mb1Byb2ZpbGUocHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IpO1xufSk7XG5cbi8vSW5zdGFuY2lhcyBQb3B1cHNcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBQcm9maWxlKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEF2YXRhcik7XG5leHBvcnQgY29uc3QgZWxlbWVudEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWxlbWVudHMpO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24ocG9wdXBEZWxldGUpO1xuXG4vL0luc3RhbmNpYXMgRm9ybVZhbGlkYXRvclxuY29uc3QgZm9ybVNlbGVjdG9yUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tcHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgZm9ybUNvbmZpZyxcbiAgZm9ybVNlbGVjdG9yUHJvZmlsZVxuKTtcbnByb2ZpbGVGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XG5jb25zdCBmb3JtU2VsZWN0b3JJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0taW1hZ2VcIik7XG5leHBvcnQgY29uc3QgaW1hZ2VGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBmb3JtQ29uZmlnLFxuICBmb3JtU2VsZWN0b3JJbWFnZVxuKTtcbmltYWdlRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuY29uc3QgZm9ybVNlbGVjdG9yQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1hdmF0YXJcIik7XG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgZm9ybUNvbmZpZyxcbiAgZm9ybVNlbGVjdG9yQXZhdGFyXG4pO1xuYXZhdGFyRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJ1c2VyIiwiX3JlZiIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUJ1dHRvblRyYXNoIiwiaGFuZGxlUG9wdXBEZWxldGUiLCJoYW5kbGVDYXJkTGlrZSIsImhhbmRsZUNhcmREaXNsaWtlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9kYXRhIiwiX2xpbmsiLCJsaW5rIiwiX25hbWUiLCJuYW1lIiwiX2xpa2VzIiwibGlrZXMiLCJsZW5ndGgiLCJfdXNlciIsIl9pZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUJ1dHRvblRyYXNoIiwiX2hhbmRsZVBvcHVwRGVsZXRlIiwiX2hhbmRsZUNhcmRMaWtlIiwiX2hhbmRsZUNhcmREaXNsaWtlIiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3RoaXMiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsInNyYyIsInRleHRDb250ZW50Iiwic29tZSIsImxpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJhbHQiLCJjb25jYXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX3RoaXMyIiwidGhlbiIsImNhcmQiLCJ0YXJnZXQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUNvbmZpZyIsImZvcm1TZWxlY3RvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJhY3RpdmVCdXR0b25DbGFzcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInByZXZlbnREZWZhdWx0IiwiZmllbGRzZXRTZWxlY3RvciIsImZpZWxkc2V0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3RoaXMzIiwiZWRpdEJ1dHRvbiIsImF2YXRhckVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJwb3B1cFByb2ZpbGUiLCJwb3B1cEF2YXRhciIsInBvcHVwRWxlbWVudHMiLCJwb3B1cEltYWdlIiwicG9wdXBEZWxldGUiLCJpbnB1dFRpdGxlIiwiaW5wdXRMaW5rIiwiZWxlbWVudEZvcm0iLCJhdmF0YXJGb3JtIiwiYXZhdGFyTGluayIsImVsZW1lbnRzQXJlYSIsInByb2ZpbGVGb3JtIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwibmFtZUZvcm0iLCJqb2JGb3JtIiwiYXZhdGFySW1hZ2UiLCJjcmVhdGVCdXR0b24iLCJkZWxldGVCdXR0b24iLCJhdmF0YXJCdXR0b24iLCJwcm9maWxlQnV0dG9uIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsImlubmVySFRNTCIsIml0ZW0iLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsIl9uZXdVc2VyTmFtZSIsIl9uZXdVc2VySm9iIiwiZm9ybU5hbWUiLCJmb3JtSm9iIiwiZ2V0VXNlckluZm8iLCJhcGlUcmlwbGUiLCJwYXRjaFVzZXJJbmZvIiwiZmluYWxseSIsImV2ZW50IiwicG9zdE5ld0NhcmQiLCJjYXJkcyIsIm5ld0NhcmRFbGVtZW50IiwiY29uc29sZSIsImxvZyIsIm93bmVyIiwiY2FyZEVsZW1lbnQiLCJpbWFnZVBvcHVwIiwib3BlbiIsImNhcmRJZCIsImNhbGxiYWNrIiwiZGVsZXRlRm9ybVBvcHVwIiwiZGVsZXRlQ2FyZCIsInB1dExpa2UiLCJkZWxldGVMaWtlIiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbVByZXAiLCJyZXNldCIsInByb2ZpbGVGb3JtUG9wdXAiLCJhYm91dCIsInNldFVzZXJJbmZvRm9ybSIsInByb2ZpbGVGb3JtVmFsaWRhdGlvbiIsInJlc2V0VmFsaWRhdGlvbiIsImVsZW1lbnRGb3JtUG9wdXAiLCJpbWFnZUZvcm1WYWxpZGF0aW9uIiwiYXZhdGFyRm9ybVBvcHVwIiwiYXZhdGFyRm9ybVZhbGlkYXRpb24iLCJwYXRjaFVzZXJBdmF0YXIiLCJjbG9zZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cENsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfY2FsbFN1cGVyIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsIl9pbmhlcml0cyIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtIiwiX3N1cGVyUHJvcEdldCIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVEZWxldGVTdWJtaXQiLCJfaGFuZGxlRGVsZXRlU3VibWl0IiwiQXBpIiwidXJsIiwiYXV0aG9yaXphdGlvbiIsIl91cmwiLCJfYXV0aG9yaXphdGlvbiIsImZldGNoIiwiaGVhZGVycyIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyb3IiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsImRlZmF1bHRDYXJkTGlzdCIsImFkZEl0ZW0iLCJwcm9maWxlSW5mbyIsInNldFVzZXJJbmZvUHJvZmlsZSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9